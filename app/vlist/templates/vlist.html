<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üéÅ –í–∏—à–ª–∏—Å—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .item {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            width: 300px;
        }
        .item img {
            max-width: 100%;
            border-radius: 5px;
        }
        .reserved {
            color: red;
            font-weight: bold;
        }
        .admin-btns {
            margin-top: 10px;
        }
        button {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        .reserve-btn { background: #4CAF50; color: white; }
        .delete-btn { background: #e74c3c; color: white; }
        .add-form {
            margin-top: 30px;
            padding: 15px;
            border: 1px solid #aaa;
            border-radius: 10px;
            width: 350px;
        }
    </style>
</head>
<body>
    <h1>üéÅ –í–∏—à–ª–∏—Å—Ç</h1>

    <div class="container">
        {% for item in items %}
        <div class="item">
            <h3>{{ item.title }}</h3>
            <p>{{ item.description }}</p>
            {% if item.image %}
                <img src="{{ url_for('static', filename='uploads/' ~ item.image) }}" width="200">
            {% endif %}
            {% if item.reserved_by %}
                {% if item.reserved_by == guest_id %}
                    <form method="POST" action="{{ url_for('vlist.unreserve', item_id=item.id) }}">
                        <button type="submit">‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω—å</button>
                    </form>
                {% else %}
                    <p class="reserved">–£–∂–µ –∫—Ç–æ-—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–¥–∞—Ä–∏—Ç—å üéÅ</p>
                {% endif %}
            {% else %}
                <form method="POST" action="{{ url_for('vlist.reserve', item_id=item.id) }}">
                    <button type="submit">–•–æ—á—É –ø–æ–¥–∞—Ä–∏—Ç—å</button>
                </form>
            {% endif %}
            
            {% if is_admin %}
                <form method="POST" action="{{ url_for('vlist.delete_item', item_id=item.id) }}">
                    <button type="submit" class="delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    {% if is_admin %}
    <hr>
    <form method="POST" action="{{ url_for('vlist.add_item') }}" enctype="multipart/form-data">
        <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
        <input type="text" name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
        <input type="file" name="image" accept="image/*">
        <button type="submit">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ö–æ—Ç–µ–ª–∫—É</button>
    </form>
    <p style="text-align:center;"><a href="{{ url_for('vlist.logout') }}">–í—ã–π—Ç–∏</a></p>
    {% else %}
    <p style="text-align:center;"><a href="{{ url_for('vlist.login') }}">–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a></p>
    {% endif %}
</body>
</html>
